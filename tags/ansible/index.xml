<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Ansible - Tag - Victor Ma</title><link>https://decmaxn.github.io/tags/ansible/</link><description>Ansible - Tag - Victor Ma</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Sun, 09 Jul 2017 10:32:00 +0000</lastBuildDate><atom:link href="https://decmaxn.github.io/tags/ansible/" rel="self" type="application/rss+xml"/><item><title>Win_feature changes will fail the tasks behind it, and it's solution</title><link>https://decmaxn.github.io/win_feature-changes-will-fail-the-tasks-behind-it-and-its-solution/</link><pubDate>Sun, 09 Jul 2017 10:32:00 +0000</pubDate><author>Victor Ma</author><guid>https://decmaxn.github.io/win_feature-changes-will-fail-the-tasks-behind-it-and-its-solution/</guid><description><![CDATA[The problem with these code is, after Server-Gui-Shell, Server-Gui-Mgmt-Infra are uninstalled, the windows will reboot immediately, leaving index.html template deployment failed.&nbsp;vagrant@acs:~/pywinrm$ cat iis.yaml---- hosts: s12&nbsp; tasks:&nbsp; - name: Ensure IIS seb service is installed&nbsp;&nbsp;&nbsp; win_feature:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name: web-server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; state: present&nbsp; - name: Ensure Server GUI is not installed&nbsp;&nbsp;&nbsp; win_feature:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name: Server-Gui-Shell&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; state: absent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; restart: true&nbsp; - name: Deploy index.html file&nbsp;&nbsp;&nbsp; template:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; src: iisstart.j2You can put that Windows Feature block to the last of this playbook, or use handlers as below.]]></description></item></channel></rss>